{
    "meta": {
        "version": "PTDL_v2",
        "update_url": null
    },
    "name": "Vanilla Bedrock-NOVO",
    "author": "parker@parkervcp.com",
    "features": [
        "pid_limit"
    ],
    "docker_images": {
        "ghcr.io/parkervcp/yolks:debian": "ghcr.io/parkervcp/yolks:debian"
    },
    "startup": "if [ -f auto_install_addons.sh ]; then bash auto_install_addons.sh; fi; ./bedrock_server",
    "config": {
        "files": "{\r\n    \"server.properties\": {\r\n        \"parser\": \"properties\",\r\n        \"find\": {\r\n            \"server-port\": \"{{server.build.default.port}}\",\r\n            \"server-name\": \"{{server.build.env.SERVERNAME}}\",\r\n            \"gamemode\": \"{{server.build.env.GAMEMODE}}\",\r\n            \"difficulty\": \"{{server.build.env.DIFFICULTY}}\",\r\n            \"allow-cheats\": \"{{server.build.env.CHEATS}}\",\r\n            \"level-seed\": \"{{server.build.env.SEED}}\",\r\n            \"texturepack-required\": \"{{server.build.env.TEXTUREPACK}}\",\r\n            \"default-player-permission-level\": \"{{server.build.env.PLAYERPERMISSION}}\"\r\n        }\r\n    }\r\n}",
        "startup": "{\r\n    \"done\": \"Server started\"\r\n}",
        "logs": "{}",
        "stop": "stop"
    },
    "scripts": {
        "installation": {
            "script": "#!/bin/bash\necho \"nameserver 8.8.8.8\" > /etc/resolv.conf\napt update\napt install -y zip unzip wget curl iputils-ping python3 python3-pip\nmkdir -p /mnt/server\ncd /mnt/server\n# ----------------------------------------------------------------\n# DOWNLOAD BEDROCK SERVER\n# ----------------------------------------------------------------\nif [ ! -z \"${DOWNLOAD_URL}\" ]; then DIRECT_URL=\"${DOWNLOAD_URL}\"; else curl -L -s -A \"Mozilla/5.0\" -o wiki.html https://minecraft.wiki/w/Bedrock_Dedicated_Server; DIRECT_URL=$(grep -o \"https://www.minecraft.net/bedrockdedicatedserver/bin-linux/bedrock-server-[0-9.]*\\.zip\" wiki.html | sort -V | tail -n 1); rm wiki.html; fi\nFILE_NAME=$(echo ${DIRECT_URL} | cut -d\"/\" -f5)\ncurl -L -A \"Mozilla/5.0\" -o $FILE_NAME $DIRECT_URL\nunzip -o $FILE_NAME\nrm $FILE_NAME\nchmod +x bedrock_server\n# ----------------------------------------------------------------\n# DOWNLOAD ADDON MANAGEMENT SCRIPTS\n# ----------------------------------------------------------------\necho \"Baixando scripts auxiliares do repositorio...\"\nmkdir -p addons_auto_install/processed\ncurl -L -s -o auto_install_addons.sh https://raw.githubusercontent.com/victorlcs87/servidor-minecraft/main/pterodactyl/auto_install_addons.sh\ncurl -L -s -o bedrock_addon_installer.py https://raw.githubusercontent.com/victorlcs87/servidor-minecraft/main/pterodactyl/bedrock_addon_installer.py\nchmod +x auto_install_addons.sh bedrock_addon_installer.py\necho \"Instalacao concluida.\"",
            "container": "ghcr.io/parkervcp/installers:debian",
            "entrypoint": "bash"
        }
    },
    "variables": [
        {
            "name": "Bedrock Version",
            "env_variable": "BEDROCK_VERSION",
            "default_value": "latest",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:20",
            "field_type": "text"
        },
        {
            "name": "Server Name",
            "env_variable": "SERVERNAME",
            "default_value": "Bedrock Dedicated Server",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:50",
            "field_type": "text"
        },
        {
            "name": "Gamemode",
            "env_variable": "GAMEMODE",
            "default_value": "creative",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:survival,creative,adventure",
            "field_type": "text"
        },
        {
            "name": "Difficulty",
            "env_variable": "DIFFICULTY",
            "default_value": "easy",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:peaceful,easy,normal,hard",
            "field_type": "text"
        },
        {
            "name": "Allow cheats",
            "env_variable": "CHEATS",
            "default_value": "true",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:true,false",
            "field_type": "text"
        },
        {
            "name": "Seed",
            "env_variable": "SEED",
            "default_value": "1193926712",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:20",
            "field_type": "text"
        },
        {
            "name": "Texturepack Required",
            "env_variable": "TEXTUREPACK",
            "default_value": "true",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:true,false",
            "field_type": "text"
        },
        {
            "name": "Player Permission Level",
            "env_variable": "PLAYERPERMISSION",
            "default_value": "operator",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:visitor,member,operator",
            "field_type": "text"
        }
    ]
}